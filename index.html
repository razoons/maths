<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>Jeux de Maths</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&display=swap" rel="stylesheet">
    <link rel="manifest" href="/maths/manifest.webmanifest">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="icon" href="/maths/icon-192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="/maths/icon-192.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.5.4/dist/vuetify.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.5.4/dist/vuetify.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app">
        <v-app>
            <v-main class="pa-4 d-flex ga-16 flex-column align-stretch justify-center" style="background-color:#0aaee3">
                <v-container>
                    <v-btn @click="goToGame" size="x-large" rounded="pill" color="#f78d17"
                        class="h-auto border-lg d-flex text-h1 elevation-24 ma-auto font-kid">JOUER</v-btn>
                </v-container>
            </v-main>
        </v-app>
    </div>
    <script>
        const { createApp, ref, onMounted } = Vue;
        const { createVuetify } = Vuetify;



        const app = createApp({
            setup() {
                function goToGame() {
                    window.location.href = "/maths/game.html";
                }
                return { goToGame };
            }
        });

        const vuetify = createVuetify();
        app.use(vuetify);
        app.mount('#app');
    </script>
    <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", async () => {
                try {
                    const reg = await navigator.serviceWorker.register("/maths/service-worker.js", { scope: "/maths/" });
                    // (optionnel) auto-update du SW
                    setInterval(() => reg.update(), 60 * 60 * 1000); // toutes les heures

                    // (optionnel) activer la nouvelle version immédiatement
                    navigator.serviceWorker.addEventListener("controllerchange", () => {
                        // tu peux rafraîchir l’UI ici si besoin
                    });
                } catch (e) {
                    console.error("SW registration failed", e);
                }
            });
        }

        window.addEventListener("beforeinstallprompt", (e) => {
            console.log("✅ beforeinstallprompt fired");
            e.preventDefault(); // tu peux aussi stocker l’event et proposer un bouton custom
        });

    </script>
</body>

</html>